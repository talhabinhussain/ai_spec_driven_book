"use strict";(self.webpackChunkai_native_book=self.webpackChunkai_native_book||[]).push([[912],{4117:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module-1-ros2/chapter-1-1-ros2-architecture","title":"Chapter 1.1 - Introduction to ROS 2 Architecture","description":"Understanding the evolution from ROS 1 to ROS 2 and core concepts","source":"@site/docs/module-1-ros2/chapter-1-1-ros2-architecture.mdx","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/chapter-1-1-ros2-architecture","permalink":"/ai_spec_driven_book/docs/module-1-ros2/chapter-1-1-ros2-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/talhabinhussain/ai_spec_driven_book/tree/main/docs/module-1-ros2/chapter-1-1-ros2-architecture.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Chapter 1.1 - Introduction to ROS 2 Architecture","description":"Understanding the evolution from ROS 1 to ROS 2 and core concepts","sidebar_position":1,"sidebar_label":"Chapter 1.1: ROS2 Architecture"},"sidebar":"tutorialSidebar","previous":{"title":"Module Overview","permalink":"/ai_spec_driven_book/docs/module-0-foundations/"},"next":{"title":"Module Overview","permalink":"/ai_spec_driven_book/docs/module-1-ros2/"}}');var r=s(4848),o=s(8453);const t={title:"Chapter 1.1 - Introduction to ROS 2 Architecture",description:"Understanding the evolution from ROS 1 to ROS 2 and core concepts",sidebar_position:1,sidebar_label:"Chapter 1.1: ROS2 Architecture"},l="Chapter 1.1: Introduction to ROS 2 Architecture",a={},c=[{value:"Overview",id:"overview",level:2},{value:"The Evolution from ROS 1 to ROS 2",id:"the-evolution-from-ros-1-to-ros-2",level:2},{value:"Why ROS 2 Exists",id:"why-ros-2-exists",level:3},{value:"Key Improvements in ROS 2",id:"key-improvements-in-ros-2",level:3},{value:"Core Concepts",id:"core-concepts",level:2},{value:"1. Nodes",id:"1-nodes",level:3},{value:"Node Characteristics",id:"node-characteristics",level:4},{value:"Example Node Purposes",id:"example-node-purposes",level:4},{value:"2. Topics (Publish-Subscribe Pattern)",id:"2-topics-publish-subscribe-pattern",level:3},{value:"How Topics Work",id:"how-topics-work",level:4},{value:"Key Characteristics",id:"key-characteristics",level:4},{value:"Common Topic Examples",id:"common-topic-examples",level:4},{value:"3. Services (Request-Response Pattern)",id:"3-services-request-response-pattern",level:3},{value:"How Services Work",id:"how-services-work",level:4},{value:"When to Use Services",id:"when-to-use-services",level:4},{value:"Common Service Examples",id:"common-service-examples",level:4},{value:"4. Actions (Long-Running Tasks)",id:"4-actions-long-running-tasks",level:3},{value:"How Actions Work",id:"how-actions-work",level:4},{value:"Action Components",id:"action-components",level:4},{value:"When to Use Actions",id:"when-to-use-actions",level:4},{value:"Common Action Examples",id:"common-action-examples",level:4},{value:"The DDS Middleware Layer",id:"the-dds-middleware-layer",level:2},{value:"What is DDS?",id:"what-is-dds",level:3},{value:"DDS Implementations",id:"dds-implementations",level:3},{value:"Understanding the Computation Graph",id:"understanding-the-computation-graph",level:2},{value:"Visualizing the Graph",id:"visualizing-the-graph",level:3},{value:"Example Graph",id:"example-graph",level:3},{value:"ROS 2 Communication Patterns",id:"ros-2-communication-patterns",level:2},{value:"1. One-Way Data Flow (Topics)",id:"1-one-way-data-flow-topics",level:3},{value:"2. Request-Response (Services)",id:"2-request-response-services",level:3},{value:"3. Goal-Oriented (Actions)",id:"3-goal-oriented-actions",level:3},{value:"Quality of Service (QoS) Policies",id:"quality-of-service-qos-policies",level:2},{value:"Key QoS Parameters",id:"key-qos-parameters",level:3},{value:"Reliability",id:"reliability",level:4},{value:"Durability",id:"durability",level:4},{value:"Common QoS Presets",id:"common-qos-presets",level:3},{value:"ROS 2 Workspace Structure",id:"ros-2-workspace-structure",level:2},{value:"Standard Workspace Layout",id:"standard-workspace-layout",level:3},{value:"Package Structure",id:"package-structure",level:3},{value:"ROS 2 Command-Line Tools",id:"ros-2-command-line-tools",level:2},{value:"Essential Commands",id:"essential-commands",level:3},{value:"Namespaces and Remapping",id:"namespaces-and-remapping",level:2},{value:"Namespaces",id:"namespaces",level:3},{value:"Remapping",id:"remapping",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Node Design",id:"1-node-design",level:3},{value:"2. Topic Naming",id:"2-topic-naming",level:3},{value:"3. Message Types",id:"3-message-types",level:3},{value:"Practical Example: Simple Robot System",id:"practical-example-simple-robot-system",level:2},{value:"Node Responsibilities",id:"node-responsibilities",level:3},{value:"Summary",id:"summary",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"chapter-11-introduction-to-ros-2-architecture",children:"Chapter 1.1: Introduction to ROS 2 Architecture"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["ROS 2 (Robot Operating System 2) is not an operating system in the traditional sense\u2014it's a ",(0,r.jsx)(n.strong,{children:"middleware framework"})," that provides the communication infrastructure, development tools, and software libraries necessary to build robot applications."]}),"\n",(0,r.jsx)(n.p,{children:"In this chapter, you'll learn the fundamental architecture of ROS 2, understand why it was redesigned from ROS 1, and grasp the core concepts that will form the foundation of everything you build in this course."}),"\n",(0,r.jsx)(n.h2,{id:"the-evolution-from-ros-1-to-ros-2",children:"The Evolution from ROS 1 to ROS 2"}),"\n",(0,r.jsx)(n.h3,{id:"why-ros-2-exists",children:"Why ROS 2 Exists"}),"\n",(0,r.jsx)(n.p,{children:"ROS 1 (released in 2007) revolutionized robotics research but had fundamental limitations:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Limitation"}),(0,r.jsx)(n.th,{children:"ROS 1"}),(0,r.jsx)(n.th,{children:"ROS 2 Solution"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Single Point of Failure"})}),(0,r.jsx)(n.td,{children:"roscore required"}),(0,r.jsx)(n.td,{children:"Fully distributed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"No Real-Time Support"})}),(0,r.jsx)(n.td,{children:"Best-effort delivery"}),(0,r.jsx)(n.td,{children:"DDS with QoS policies"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Network Security"})}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"DDS Security (SROS2)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Multi-Robot Systems"})}),(0,r.jsx)(n.td,{children:"Complex workarounds"}),(0,r.jsx)(n.td,{children:"Native support"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Production Use"})}),(0,r.jsx)(n.td,{children:"Research-focused"}),(0,r.jsx)(n.td,{children:"Industry-grade reliability"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"key-improvements-in-ros-2",children:"Key Improvements in ROS 2"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    A[ROS 2 Architecture] --\x3e B[DDS Middleware]\n    A --\x3e C[Distributed System]\n    A --\x3e D[Real-Time Capable]\n    A --\x3e E[Secure by Default]\n    B --\x3e F[Quality of Service]\n    C --\x3e G[No Master Node]\n    D --\x3e H[Executor Model]\n    E --\x3e I[SROS2]\n"})}),"\n",(0,r.jsx)(n.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,r.jsx)(n.h3,{id:"1-nodes",children:"1. Nodes"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Nodes"})," are the fundamental building blocks of ROS 2 applications. Each node is a ",(0,r.jsx)(n.strong,{children:"process"})," that performs a specific computation."]}),"\n",(0,r.jsx)(n.h4,{id:"node-characteristics",children:"Node Characteristics"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Single Purpose:"})," Each node should do one thing well"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Modular:"})," Nodes can be developed, tested, and deployed independently"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Composable:"})," Multiple nodes work together to create complex behaviors"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Language Agnostic:"})," Write in Python, C++, or other supported languages"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"example-node-purposes",children:"Example Node Purposes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u251c\u2500\u2500 /camera_driver          \u2192 Publishes raw images\n\u251c\u2500\u2500 /image_processor        \u2192 Detects objects in images\n\u251c\u2500\u2500 /robot_controller       \u2192 Commands robot motors\n\u2514\u2500\u2500 /path_planner           \u2192 Computes navigation paths\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-topics-publish-subscribe-pattern",children:"2. Topics (Publish-Subscribe Pattern)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Topics"})," enable ",(0,r.jsx)(n.strong,{children:"asynchronous, many-to-many communication"})," between nodes using a publish-subscribe model."]}),"\n",(0,r.jsx)(n.h4,{id:"how-topics-work",children:"How Topics Work"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph LR\n    A[Publisher Node] --\x3e|publishes| B[/camera/image Topic]\n    B --\x3e C[Subscriber Node 1]\n    B --\x3e D[Subscriber Node 2]\n    B --\x3e E[Subscriber Node N]\n"})}),"\n",(0,r.jsx)(n.h4,{id:"key-characteristics",children:"Key Characteristics"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Asynchronous:"})," Publishers don't wait for subscribers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Decoupled:"})," Publishers don't know who's subscribing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Typed:"})," Each topic has a specific message type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Many-to-Many:"})," Multiple publishers and subscribers per topic"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"common-topic-examples",children:"Common Topic Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"/camera/image_raw           # sensor_msgs/Image\n/cmd_vel                    # geometry_msgs/Twist\n/joint_states               # sensor_msgs/JointState\n/odom                       # nav_msgs/Odometry\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-services-request-response-pattern",children:"3. Services (Request-Response Pattern)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Services"})," provide ",(0,r.jsx)(n.strong,{children:"synchronous, one-to-one communication"})," for request-response interactions."]}),"\n",(0,r.jsx)(n.h4,{id:"how-services-work",children:"How Services Work"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:'sequenceDiagram\n    Client->>Server: Request (e.g., "Enable motors")\n    Server->>Server: Process request\n    Server->>Client: Response (e.g., "Motors enabled: true")\n'})}),"\n",(0,r.jsx)(n.h4,{id:"when-to-use-services",children:"When to Use Services"}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Use Services When:"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"You need a response immediately"}),"\n",(0,r.jsx)(n.li,{children:"The operation is quick (< 1 second)"}),"\n",(0,r.jsx)(n.li,{children:"It's a configuration or query operation"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u274c ",(0,r.jsx)(n.strong,{children:"Don't Use Services When:"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The operation takes a long time"}),"\n",(0,r.jsx)(n.li,{children:"You need progress updates"}),"\n",(0,r.jsx)(n.li,{children:"Multiple clients might call simultaneously"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"common-service-examples",children:"Common Service Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"/get_robot_state            # Check current robot status\n/reset_odometry             # Reset position tracking\n/set_parameters             # Configure node settings\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-actions-long-running-tasks",children:"4. Actions (Long-Running Tasks)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Actions"})," are designed for ",(0,r.jsx)(n.strong,{children:"long-running, preemptable tasks"})," that provide feedback."]}),"\n",(0,r.jsx)(n.h4,{id:"how-actions-work",children:"How Actions Work"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:'sequenceDiagram\n    Client->>Server: Goal (e.g., "Navigate to point X")\n    Server->>Client: Accepted\n    loop During Execution\n        Server->>Client: Feedback (distance remaining)\n    end\n    Server->>Client: Result (success/failure)\n'})}),"\n",(0,r.jsx)(n.h4,{id:"action-components",children:"Action Components"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Goal:"})," What you want to accomplish"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Feedback:"})," Progress updates during execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Result:"})," Final outcome when complete"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"when-to-use-actions",children:"When to Use Actions"}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Use Actions When:"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Task takes more than 1 second"}),"\n",(0,r.jsx)(n.li,{children:"You need progress updates"}),"\n",(0,r.jsx)(n.li,{children:"Task should be cancellable mid-execution"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"common-action-examples",children:"Common Action Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"/navigate_to_pose           # Move robot to target location\n/follow_path                # Execute a planned trajectory\n/gripper_grasp              # Close gripper on object\n"})}),"\n",(0,r.jsx)(n.h2,{id:"the-dds-middleware-layer",children:"The DDS Middleware Layer"}),"\n",(0,r.jsx)(n.h3,{id:"what-is-dds",children:"What is DDS?"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"DDS (Data Distribution Service)"})," is the communication layer underneath ROS 2. It provides:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Discovery:"})," Nodes automatically find each other"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Quality of Service (QoS):"})," Configure reliability, durability, and latency"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security:"})," Encrypted communication (SROS2)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Real-Time:"})," Deterministic message delivery"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"dds-implementations",children:"DDS Implementations"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 supports multiple DDS vendors:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Implementation"}),(0,r.jsx)(n.th,{children:"Characteristics"}),(0,r.jsx)(n.th,{children:"Use Case"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Fast DDS"})}),(0,r.jsx)(n.td,{children:"Default, well-optimized"}),(0,r.jsx)(n.td,{children:"General purpose"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Cyclone DDS"})}),(0,r.jsx)(n.td,{children:"Lightweight, fast discovery"}),(0,r.jsx)(n.td,{children:"Resource-constrained systems"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"RTI Connext"})}),(0,r.jsx)(n.td,{children:"Professional, certified"}),(0,r.jsx)(n.td,{children:"Industrial applications"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"You can switch DDS implementations without changing code:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export RMW_IMPLEMENTATION=rmw_cyclonedx_cpp\n"})}),"\n",(0,r.jsx)(n.h2,{id:"understanding-the-computation-graph",children:"Understanding the Computation Graph"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"computation graph"})," is the network of nodes and their connections."]}),"\n",(0,r.jsx)(n.h3,{id:"visualizing-the-graph",children:"Visualizing the Graph"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"rqt_graph"})," to visualize running nodes and topics:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run rqt_graph rqt_graph\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-graph",children:"Example Graph"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  /camera_driver \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502 /camera/image_raw\n         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n         \u25bc               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 /object_detect \u2502  \u2502  /image_viewer  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502 /detected_objects\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 /robot_control \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-communication-patterns",children:"ROS 2 Communication Patterns"}),"\n",(0,r.jsx)(n.h3,{id:"1-one-way-data-flow-topics",children:"1. One-Way Data Flow (Topics)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Publisher\npublisher.publish(msg)  # Fire and forget\n\n# Subscriber\ndef callback(msg):\n    process(msg)  # Called when message arrives\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-request-response-services",children:"2. Request-Response (Services)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Client\nresponse = client.call(request)  # Blocks until response\n\n# Server\ndef handle_request(request, response):\n    response.result = process(request)\n    return response\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-goal-oriented-actions",children:"3. Goal-Oriented (Actions)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Client\ngoal = NavigateToPose.Goal()\nfuture = action_client.send_goal_async(goal, feedback_callback)\n\n# Server\ndef execute_callback(goal_handle):\n    while not done:\n        goal_handle.publish_feedback(progress)\n    return result\n"})}),"\n",(0,r.jsx)(n.h2,{id:"quality-of-service-qos-policies",children:"Quality of Service (QoS) Policies"}),"\n",(0,r.jsx)(n.p,{children:"QoS policies allow you to tune communication characteristics."}),"\n",(0,r.jsx)(n.h3,{id:"key-qos-parameters",children:"Key QoS Parameters"}),"\n",(0,r.jsx)(n.h4,{id:"reliability",children:"Reliability"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RELIABLE:"})," Guarantee delivery (TCP-like)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"BEST_EFFORT:"})," Send and forget (UDP-like)"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, ReliabilityPolicy\n\nqos = QoSProfile(\n    reliability=ReliabilityPolicy.RELIABLE,\n    depth=10  # Message queue size\n)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"durability",children:"Durability"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"VOLATILE:"})," Only send to current subscribers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"TRANSIENT_LOCAL:"})," Send last message to new subscribers"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import DurabilityPolicy\n\nqos = QoSProfile(\n    durability=DurabilityPolicy.TRANSIENT_LOCAL\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"common-qos-presets",children:"Common QoS Presets"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import qos_profile_sensor_data\nfrom rclpy.qos import qos_profile_services_default\nfrom rclpy.qos import qos_profile_system_default\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-workspace-structure",children:"ROS 2 Workspace Structure"}),"\n",(0,r.jsx)(n.h3,{id:"standard-workspace-layout",children:"Standard Workspace Layout"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"ros2_ws/\n\u251c\u2500\u2500 src/                    # Source code\n\u2502   \u251c\u2500\u2500 my_robot_pkg/\n\u2502   \u2502   \u251c\u2500\u2500 my_robot_pkg/  # Python package\n\u2502   \u2502   \u251c\u2500\u2500 package.xml    # Package manifest\n\u2502   \u2502   \u2514\u2500\u2500 setup.py       # Python setup\n\u2502   \u2514\u2500\u2500 another_pkg/\n\u251c\u2500\u2500 build/                  # Build artifacts (auto-generated)\n\u251c\u2500\u2500 install/                # Installed files (auto-generated)\n\u2514\u2500\u2500 log/                    # Build logs (auto-generated)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"package-structure",children:"Package Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"my_robot_pkg/\n\u251c\u2500\u2500 my_robot_pkg/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 my_node.py\n\u2502   \u2514\u2500\u2500 utils.py\n\u251c\u2500\u2500 resource/\n\u2502   \u2514\u2500\u2500 my_robot_pkg       # Package marker\n\u251c\u2500\u2500 test/\n\u2502   \u2514\u2500\u2500 test_my_node.py\n\u251c\u2500\u2500 package.xml            # Package dependencies\n\u2514\u2500\u2500 setup.py               # Python setup\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-command-line-tools",children:"ROS 2 Command-Line Tools"}),"\n",(0,r.jsx)(n.h3,{id:"essential-commands",children:"Essential Commands"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Node management\nros2 node list              # List running nodes\nros2 node info /my_node     # Show node details\n\n# Topic management\nros2 topic list             # List all topics\nros2 topic echo /cmd_vel    # Print topic messages\nros2 topic hz /camera/image # Show message rate\nros2 topic pub /cmd_vel ... # Publish from terminal\n\n# Service management\nros2 service list           # List all services\nros2 service call /reset    # Call a service\n\n# Action management\nros2 action list            # List all actions\nros2 action send_goal ...   # Send action goal\n\n# Package management\nros2 pkg list               # List installed packages\nros2 pkg create my_pkg      # Create new package\n"})}),"\n",(0,r.jsx)(n.h2,{id:"namespaces-and-remapping",children:"Namespaces and Remapping"}),"\n",(0,r.jsx)(n.h3,{id:"namespaces",children:"Namespaces"}),"\n",(0,r.jsx)(n.p,{children:"Organize nodes hierarchically to avoid naming conflicts:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"/robot1/camera/image_raw\n/robot2/camera/image_raw\n"})}),"\n",(0,r.jsx)(n.p,{children:"Launch with namespace:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run pkg_name node_name --ros-args -r __ns:=/robot1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"remapping",children:"Remapping"}),"\n",(0,r.jsx)(n.p,{children:"Change topic names at runtime:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run pkg_name node_name --ros-args -r /cmd_vel:=/robot1/cmd_vel\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-node-design",children:"1. Node Design"}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"DO:"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Keep nodes focused on single responsibilities"}),"\n",(0,r.jsxs)(n.li,{children:["Use descriptive node names: ",(0,r.jsx)(n.code,{children:"/camera_driver"})," not ",(0,r.jsx)(n.code,{children:"/node1"})]}),"\n",(0,r.jsx)(n.li,{children:"Handle initialization errors gracefully"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u274c ",(0,r.jsx)(n.strong,{children:"DON'T:"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create monolithic nodes that do everything"}),"\n",(0,r.jsx)(n.li,{children:"Use hard-coded topic names"}),"\n",(0,r.jsx)(n.li,{children:"Ignore error conditions"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-topic-naming",children:"2. Topic Naming"}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"DO:"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/camera/image_raw           # Clear hierarchy\n/robot/joint_states         # Descriptive names\n/navigation/cmd_vel         # Grouped by function\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u274c ",(0,r.jsx)(n.strong,{children:"DON'T:"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/data                       # Too vague\n/t1                         # Not descriptive\n/MySpecialTopic            # Use lowercase with underscores\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-message-types",children:"3. Message Types"}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"DO:"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use standard message types when possible"}),"\n",(0,r.jsx)(n.li,{children:"Create custom messages for domain-specific data"}),"\n",(0,r.jsx)(n.li,{children:"Document message field meanings"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u274c ",(0,r.jsx)(n.strong,{children:"DON'T:"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Abuse generic types (e.g., ",(0,r.jsx)(n.code,{children:"String"})," for structured data)"]}),"\n",(0,r.jsx)(n.li,{children:"Create duplicate message types"}),"\n",(0,r.jsx)(n.li,{children:"Use nested messages excessively"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"practical-example-simple-robot-system",children:"Practical Example: Simple Robot System"}),"\n",(0,r.jsx)(n.p,{children:"Let's visualize a minimal robot system:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TB\n    A[Joystick Node] --\x3e|/joy| B[Teleop Node]\n    B --\x3e|/cmd_vel| C[Motor Controller]\n    C --\x3e|motor commands| D[Hardware]\n    D --\x3e|/joint_states| E[State Publisher]\n    E --\x3e|/tf| F[TF Broadcaster]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"node-responsibilities",children:"Node Responsibilities"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Joystick Node:"})," Reads gamepad input"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Teleop Node:"})," Converts joy to velocity commands"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Motor Controller:"})," Sends commands to hardware"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"State Publisher:"})," Reports robot state"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"TF Broadcaster:"})," Publishes coordinate transforms"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"In this chapter, you learned:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 The evolution from ROS 1 to ROS 2 and key improvements"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Core concepts: Nodes, Topics, Services, and Actions"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 The DDS middleware layer and QoS policies"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 ROS 2 workspace and package structure"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Essential command-line tools for development"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Best practices for node and topic naming"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.p,{children:"Now that you understand the architecture, you're ready to write your first ROS 2 node!"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Continue to:"})," ",(0,r.jsx)(n.a,{href:"chapter-1-2-first-ros2-node",children:"Chapter 1.2: Building Your First ROS 2 Node \u2192"})]}),"\n",(0,r.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/",children:"ROS 2 Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.omg.org/spec/DDS/",children:"DDS Specification"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://design.ros2.org/",children:"ROS 2 Design"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html",children:"QoS Policy Guide"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var i=s(6540);const r={},o=i.createContext(r);function t(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);